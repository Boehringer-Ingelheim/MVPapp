<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Model Visualization Platform • MVPapp</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Model Visualization Platform">
<meta name="description" content="Model Visualization Platform (MVP) is an intuitive and interactive pharmacometrics environment requiring minimal setup from the users. It is a flexible tool that allows users to explore model structures, parameters, dosing regimens, and compare with observations. The goal of MVP is to support initial model development and facilitate internal discussions more efficiently. Additional features include parameter sensitivity analysis, displaying NCA metrics using a time range defined by users, basic data exploration, variability assessment, and more.">
<meta property="og:description" content="Model Visualization Platform (MVP) is an intuitive and interactive pharmacometrics environment requiring minimal setup from the users. It is a flexible tool that allows users to explore model structures, parameters, dosing regimens, and compare with observations. The goal of MVP is to support initial model development and facilitate internal discussions more efficiently. Additional features include parameter sensitivity analysis, displaying NCA metrics using a time range defined by users, basic data exploration, variability assessment, and more.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">MVPapp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/supply-passwords.html">Supplying Passworded Models</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Boehringer-Ingelheim/MVP/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="model-visualization-platform">Model Visualization Platform<a class="anchor" aria-label="anchor" href="#model-visualization-platform"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p><code>MVPapp</code> is an R package that bundles the <a href="https://mvp.boehringer-ingelheim.com/" target="_blank" class="external-link">Model Visualization Platform (MVP)</a> Shiny application for local use and/or deployment. MVP is an interactive pharmacometrics environment requiring minimal setup from the users, and is developed with user-friendliness as a top priority so even non-modelers may be able to explore different aspects of the models without too much hassle, whilst balancing complexity for advanced users. Some features include:<br>
- Live code editing using <a href="https://github.com/metrumresearchgroup/mrgsolve" target="_blank" class="external-link">mrgsolve</a><br>
- Flexible dosing regimens, supporting up to 5 independent dosing schedules per model<br>
- Basic data exploration and data cleaning, and overlaying of data<br>
- Quick NCA output and reporting<br>
- Model comparison to visualize differences<br>
- Parameter sensitivity analysis to easily evaluate impact of changing parameters<br>
- Automatic PK/PD metrics using a user-defined time range<br>
- Variability assessment using external databases such as the NHANES, WHO, and CDC virtual patients<br>
- Custom covariate distributions to further assess variability</p>
<p>The goal of MVP is to support initial model development and facilitate internal discussions more efficiently.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>MVPapp</code> is not currently on CRAN. Install it via <code>devtools</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Install devtools first if required</span></span>
<span><span class="co"># install.packages(devtools)</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Boehringer-Ingelheim/MVPapp"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Once installed, launch MVP using the following commands:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Boehringer-Ingelheim/MVP" class="external-link">MVPapp</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/run_mvp.html">run_mvp</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Alternatively, launch the app without watermarks</span></span>
<span><span class="co">## see ?run_mvp for more options</span></span>
<span><span class="co"># run_mvp(insert_watermarks = FALSE)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="simulations-without-variability">Simulations without Variability<a class="anchor" aria-label="anchor" href="#simulations-without-variability"></a>
</h3>
<p>This is the default landing page when the App is launched. It looks a bit empty at the moment, however it is very simple to start generating a model and show a plot. All important settings are neatly situated together on the same page so the user can appreciate in real-time whenever they change certain aspects of the model. This page should be the <strong>homepage</strong> as other pages of the app inherit settings from this page (e.g. dosing and axis choices).</p>
<p><img src="www/simtab1.png"></p>
<ol style="list-style-type: decimal">
<li>Navigate to the “Select Model 1” box on the left hand side and choose a template model from the drop-down list, or upload your own .cpp file.
<ul>
<li>Once a model is selected or uploaded, you can make further changes in the Code Editor below.<br>
</li>
<li>You may also copy across your own model code by selecting the “Blank Template” model. Note that when you switch models, all changes are lost.</li>
<li>Note that the <strong>entire model code is a string</strong> that is assigned to the <code>model_code</code> object, and initialized as <code>model_object</code>. Therefore, if the model code contains quotation marks, the user will have to remove those manually (or escape them using the forward slash, <code>\</code>) to avoid compilation errors.<br>
</li>
</ul>
</li>
<li>Click on the <code>Generate Model 1</code> button. If the model compiles, the “Parameter Values” box will be populated, and a plot will show up on the right hand side.
<ul>
<li>If the model fails to compile, check the “Model Info (Console)” box for the error message.<br>
</li>
<li>Note that <strong>all sources of variability are ignored on this page</strong> (<code>zero_re()</code> from <code>mrgsolve</code> is applied). Navigate to the Variability Page if you want to assess variability in populations (see section below).</li>
</ul>
</li>
<li>Dosing is handled on the right hand side above the plot. Each tab contains independent dosing schedules that will be combined together. The “Transform Dose” tab contains more options that are self-explanatory. The “Model Duration/Rate” tab provides options to handle modeling duration or rate, which are done automatically by default.</li>
<li>Plotting options are on the right hand side below the plot. Most of the options are self-explanatory, and the ones that require clarification have a pop-up tooltip when you click on the input selection. Once a dataset has been uploaded from the “Data Input” page, it can be overlaid on top of the simulations (see section below).<br>
</li>
<li>Sampling times are configured on the right hand side below the plot in the “Simulation Options” tab. A custom sampling schedule can be defined (make sure to also check the “Use Custom Sampling Times” checkbox).</li>
<li>A second Model can be generated by repeating steps 1-5 by navigating to the “Model 2” tab on the top left. The models are completely separate in every aspect, making visual comparisons in dosing regimens or model structures extremely easy.
<ul>
<li>By default, the dosing regimens for Model 2 is collapsed for appearance. Click on the “+” icon on the right hand side to expand it.</li>
</ul>
</li>
</ol>
<p><img src="www/2models1.png"></p>
<ol start="7" style="list-style-type: decimal">
<li>In general, most plots are interactive (using the <code>plotly</code> package), which allows zooming, panning, drawing etc, controlled from the top right of the plot. The camera icon downloads the current plot, based on the options set by the “Download Options” box on the bottom right of the page.</li>
</ol>
<p><img src="www/plotlytoolbar.png"></p>
</div>
<div class="section level3">
<h3 id="uploading-datasets-and-data-exploration">Uploading Datasets and Data Exploration<a class="anchor" aria-label="anchor" href="#uploading-datasets-and-data-exploration"></a>
</h3>
<p>Uploading NONMEM-formatted datasets (.csv) and tab-delimited text files (.txt) is supported in the “Data Input” page. Some default cleaning options are applied automatically from the “Built-in Dataset Cleaning Options” box. Further filtering and cleaning may be applied in the code editor on the left hand side. The dataset should have the “ID”, “TIME”, and “DV” columns to be fully supported by the rest of the app (e.g. data overlay). At minimum, only the “ID” column is required to support Data Exploration in the Data Input page. If missing, the user may create / rename these columns using the code editor.</p>
<ol style="list-style-type: decimal">
<li>The filtered dataset (i.e. after passing through the code editor) is shown on the right hand side table.<br>
</li>
<li>Summary statistics of the data per ID is shown on the second sub tab on the top right hand side.<br>
</li>
<li>Descriptive statistics (NCA) can be derived (supporting non-NONMEM datasets) by defining the options and then clicking the “Calculate NCA” button, from the “Descriptive Statistics” tab. Note that <strong>this feature is experimental and assumes a single dose per subject only for a single compartment. The user may need to filter their dataset accordingly.</strong> The displayed table can be transposed if required. Results and plots per subject can be downloaded by the buttons at the bottom of the page.</li>
</ol>
<p><img src="www/ncaexample.png"></p>
<ol start="4" style="list-style-type: decimal">
<li>Quick data exploration are provided by the “General Plot”, “Ind. Plot”, and “Corr. Plot” tabs (tip: clicking on the legend can toggle each subgroup on/off when the plot is interactive):</li>
</ol>
<p>General plots are flexible plots that can handle continuous/continuous, continuous/discrete, and discrete/discrete types of data. Settings from General Plots will be carried over to the “Ind. Plot”, where users can explore individual profiles in more detail.</p>
<p><img src="www/facet_plot.png"></p>
<p>Correlation plots are grouped by ID and are useful to explore potential correlations between covariates.</p>
<p><img src="www/corr_plot.png"></p>
<p><strong>Note: once a dataset is uploaded, its display can be toggled on other pages by checking the “Overlay Dataset” checkbox in the “Plotting Options” in each respective page!</strong></p>
<p><img src="www/overlayexp.png"></p>
</div>
<div class="section level3">
<h3 id="parameter-sensitivity-analysis">Parameter Sensitivity Analysis<a class="anchor" aria-label="anchor" href="#parameter-sensitivity-analysis"></a>
</h3>
<p>After a model has been generated from the Simulation page, the impact of perturbing parameter values can be assessed in the Parameter Sensitivity Analysis. MVP makes this transition seamless by carrying across previously defined model settings and making them available (i.e. in <code>$PARAM</code>) for selection.</p>
<ol style="list-style-type: decimal">
<li>Select a parameter of interest from the top left drop-down list.<br>
</li>
<li>Adjust parameter values immediately below. By default, MVP provides 3 profiles (±50% of the original value, and the original value itself). The user may further adjust the values manually as they see fit.<br>
</li>
<li>Changes are immediately shown on the plot on the right, and PK/PD metrics are provided on the left page under each respective sub tab.
<ul>
<li>If you have a PK/PD model, you may need to switch the Y-axis from the Simulation page to display PD information, assuming your default Y-axis is PK concentration.<br>
</li>
<li>The rounding of the metrics can be changed in the “Rounding Options” sub tab.<br>
</li>
</ul>
</li>
<li>The time interval to derive metrics can be adjusted in the “Select Time Interval for Deriving Metrics” box, below the plot.
<ul>
<li>Note that <strong>the original time scale is always used</strong> (if the user has changed scaling by using the “Scale X-axis (Divide by)” option from the Simulation page).<br>
</li>
</ul>
</li>
<li>Plotting and Download Options are similar to those in the Simulation page.<br>
</li>
<li>Simulations of the middle profile, in addition to its derived metrics can be downloaded in the Table page.</li>
</ol>
<p><img src="www/psaexample.png"></p>
</div>
<div class="section level3">
<h3 id="simulations-with-variability">Simulations with Variability<a class="anchor" aria-label="anchor" href="#simulations-with-variability"></a>
</h3>
<p>What makes MVP truly a joy to use is its ease in answering typical questions such as:<br>
- What are the predicted PK exposures in pediatrics?<br>
- What are the predicted PK exposures within a certain weight range?<br>
- What are the predicted PK exposures in patients with moderate to severe renal impairment (or any other covariate where having a <strong>distribution</strong> is desired)?<br>
- What is the likelihood of maintaining PD response above a certain threshold?<br>
- …or a <em>combination</em> of the above questions together!</p>
<p>All of these questions can be handled in MVP in seconds, massively reducing turnaround time from team discussions (or even doing this live)!</p>
<div class="section level4">
<h4 id="defining-population-covariates">Defining Population (Covariates)<a class="anchor" aria-label="anchor" href="#defining-population-covariates"></a>
</h4>
<ol style="list-style-type: decimal">
<li>External patient databases (<a href="https://wwwn.cdc.gov/nchs/nhanes/Default.aspx" target="_blank" class="external-link">NHANES</a>, <a href="https://www.cdc.gov/growthcharts/percentile_data_files.htm" target="_blank" class="external-link">CDC</a>, <a href="https://www.who.int/toolkits/child-growth-standards/standards/weight-for-age" target="_blank" class="external-link">WHO</a>) can be configured in the “Demographics” box on the top left. Select a relevant database from the drop-down list, or use “None” to only change the number of subjects being simulated.
<ul>
<li>If the model code contains any of <code>AGE</code>, <code>WT</code>, <code>HT</code>, <code>BMI</code>, or <code>BSA</code> in its <code>$PARAM</code> section, its value will be <strong>replaced</strong> by the subjects’ value from the sampled database.<br>
</li>
<li>Sampled demographics can be downloaded in the “Summary Statistics” sub-tab if the user wants to use this to perform their own simulations.<br>
</li>
<li>Histogram of weight and age can be viewed in the “Plots” sub-tab.</li>
</ul>
</li>
</ol>
<p><img src="www/demog1.png"></p>
<ol start="2" style="list-style-type: decimal">
<li>Custom covariate distributions can be defined (e.g. <code>EGFR</code>) and inserted similarly together with the database shown in step 1). Up to 3 unique covariate distributions are enabled.
<ul>
<li>Normal, Log-normal, uniform, binary categorical distributions are supported.<br>
</li>
<li>Once defined, they will be made available in the “Summary Statistics” sub tab and able to be downloaded.</li>
</ul>
</li>
</ol>
<p><img src="www/egfrexample.png"></p>
</div>
<div class="section level4">
<h4 id="assessing-variability">Assessing Variability<a class="anchor" aria-label="anchor" href="#assessing-variability"></a>
</h4>
<p>Both OMEGAs and SIGMAs, if it exists in the model, will be available for the user to adjust on the bottom left hand side of the page. Once ready, click the “Update Model” button to generate new simulations.<br>
- There are built-in checks to ensure matrices are positive semi-definite and non-negative, however the user should make sure that values are sensible. The “Matrix Info” box below should match the matrices - if not, that means the inputted matrices were invalid and the matrices has reverted to its last known state.</p>
<ol style="list-style-type: decimal">
<li>A plot with variability should appear on the right after “Update Model” has been pressed (note: any time the matrices are changed, the user needs to click the “Update Model” for it to take effect).<br>
</li>
<li>The display can be changed to either show percentile range or individual profiles in the “Plotting Options”.<br>
</li>
<li>Percentage of subjects above a certain value can be calculated in the “Threshold Calculations” box on the right.
<ul>
<li>By default, the last time is used. However this can be changed using the “At Time (Original Scale)” option.</li>
</ul>
</li>
</ol>
<p><img src="www/varplot.png"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="extended-features">Extended Features<a class="anchor" aria-label="anchor" href="#extended-features"></a>
</h2>
<div class="section level3">
<h3 id="providing-external-models-and-changing-default-settings">Providing external models and changing default settings<a class="anchor" aria-label="anchor" href="#providing-external-models-and-changing-default-settings"></a>
</h3>
<p>Please see the article on <a href="https://boehringer-ingelheim.github.io/MVPapp/articles/supply-passwords.html">Supplying Passworded Models</a>, or access the vignette on this topic in R (<code>vignette("supply-passwords", package = "MVPapp"</code>) for instructions on how to provide external models on App start-up.</p>
</div>
<div class="section level3">
<h3 id="run-mvp-as-a-regular-shiny-app">Run MVP as a regular Shiny App<a class="anchor" aria-label="anchor" href="#run-mvp-as-a-regular-shiny-app"></a>
</h3>
<p>To run MVP without calling <code><a href="reference/run_mvp.html">run_mvp()</a></code>, navigate to the path of the installed <code>MVPapp</code> package, open <code>shiny/app.R</code>, and set <code>debug_mode &lt;- TRUE</code>. Then you would be able to run the App as-is. Change back to <code>debug_mode &lt;- FALSE</code> to allow passing of options via <code><a href="reference/run_mvp.html">run_mvp()</a></code> again.</p>
</div>
<div class="section level3">
<h3 id="sources-for-patient-databases">Sources for patient databases<a class="anchor" aria-label="anchor" href="#sources-for-patient-databases"></a>
</h3>
<p>The raw data and code used for deriving the populations used in MVP for the NHANES, CDC, and WHO databases are available inside the <code>data-raw</code> folder on Github (note: not included as part of the R-package).</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Boehringer-Ingelheim/MVP/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing MVPapp</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Steve Choy <br><small class="roles"> Author, maintainer </small>  </li>
<li>Jin Gyu Kim <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Choy, Jin Gyu Kim.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
